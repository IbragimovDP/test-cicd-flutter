name: ðŸ“¦ðŸš€ Build & deploy iOS app
on:
  push:
    tags:
      - i*

jobs:
  deployIos:
    uses: ibragimovdp/reusable-workflow/.github/workflows/ios-deploy.yaml@main
    secrets:
      APP_STORE_CONNECT_API_KEY_ID: '${{ secrets.APP_STORE_CONNECT_API_KEY_ID }}'
      APP_STORE_CONNECT_API_PRIVATE_KEY: '${{ secrets.APP_STORE_CONNECT_API_PRIVATE_KEY }}'
      APP_STORE_CONNECT_ISSUER_ID: '${{ secrets.APP_STORE_CONNECT_ISSUER_ID }}'
      IOS_DISTRIBUTION_PROVISIONING_PROFILE_BASE64: '${{ secrets.IOS_DISTRIBUTION_PROVISIONING_PROFILE_BASE64 }}'
      IOS_EXPORT_OPTIONS_BASE64: '${{ secrets.IOS_EXPORT_OPTIONS_BASE64 }}'
      IOS_P12_DISTRIBUTION_CERTIFICATE_BASE64: '${{ secrets.IOS_P12_DISTRIBUTION_CERTIFICATE_BASE64 }}'
      IOS_P12_DISTRIBUTION_CERTIFICATE_PASSWORD: '${{ secrets.IOS_P12_DISTRIBUTION_CERTIFICATE_PASSWORD }}'
      PROJECT_CHANNEL_ID: '${{ secrets.PROJECT_CHANNEL_ID }}'